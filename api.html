<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html"><link rel="search" title="Search" href="search.html"><link rel="prev" title="Recipes" href="recipes.html">
        <link rel="prefetch" href="_static/logo.png" as="image">

    <link rel="shortcut icon" href="_static/favicon.svg"><!-- Generated with Sphinx 8.1.3 and Furo 2025.12.19 -->
        <title>API Reference - v0.1.2</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  --color-brand-primary: #f8ba26;
  --color-brand-content: #f8ba26;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #f8ba26;
  --color-brand-content: #f8ba26;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #f8ba26;
  --color-brand-content: #f8ba26;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     <em>Important</em> protobunny is in alpha! 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">v0.1.2</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">v0.1.2</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Protobunny</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">API Reference</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/api.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Link to this heading">¶</a></h1>
<section id="core-package-async">
<h2>Core Package Async<a class="headerlink" href="#core-package-async" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.asyncio">A module providing async support for messaging and communication using the configured broker as the backend.</p>
<p>This module includes functionality for publishing, subscribing, and managing message queues,
as well as dynamically managing imports and configurations for the backend.</p>
<dl class="py exception">
<dt class="sig sig-object py" id="protobunny.asyncio.ConnectionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">ConnectionError</span></span><a class="reference internal" href="_modules/protobunny/exceptions.html#ConnectionError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.ConnectionError" title="Link to this definition">¶</a></dt>
<dd><p>Raised when connection operations fail.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="protobunny.asyncio.RequeueMessage">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">RequeueMessage</span></span><a class="reference internal" href="_modules/protobunny/exceptions.html#RequeueMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.RequeueMessage" title="Link to this definition">¶</a></dt>
<dd><p>Raise when a message could not be handled but should be requeued.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.config_lib">
<span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">config_lib</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#config_lib"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.config_lib" title="Link to this definition">¶</a></dt>
<dd><p>Add the generated package root to the sys.path.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.connect">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BaseAsyncConnection</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.connect" title="Link to this definition">¶</a></dt>
<dd><p>Establishes an asynchronous connection to the configured messaging broker.</p>
<p>This method initializes and returns a singleton async connection. Subsequent
calls return the existing connection instance unless it has been disconnected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Backend-specific connection arguments (e.g., host, port,
credentials, or protocol-specific tuning parameters).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The active asynchronous connection singleton.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.backends.BaseAsyncConnection" title="protobunny.backends.BaseAsyncConnection">BaseAsyncConnection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.disconnect">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Closes the active asynchronous connection to the broker.</p>
<p>Gracefully terminates heartbeats and background networking tasks. Safe to
call even if no connection is active.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.get_message_count">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PBM</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.get_message_count" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously retrieves the current number of pending messages in a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg_type</strong> – The message instance, class, or module representing the queue.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The count of messages waiting to be processed, or None</dt><dd><p>if the backend does not support count retrieval for this type.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.get_queue">
<span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">get_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg_or_msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage" title="protobunny.models.ProtoBunnyMessage"><span class="pre">ProtoBunnyMessage</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'ProtoBunnyMessage'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backend_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.BaseSyncQueue" title="protobunny.backends.BaseSyncQueue"><span class="pre">BaseSyncQueue</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">BaseAsyncQueue</span></span></span><a class="reference internal" href="_modules/protobunny/helpers.html#get_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.get_queue" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Factory method to get an AsyncQueue/SyncQueue instance based on</dt><dd><ul class="simple">
<li><p>the message type (e.g. mylib.subpackage.subsubpackage.MyMessage)</p></li>
<li><p>the mode (e.g. async)</p></li>
<li><p>the configured backend or the parameter passed (e.g. “rabbitmq”)</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg_or_msg</strong> – A message instance, a message class, or a module
containing message definitions.</p></li>
<li><p><strong>backend_name</strong> – backend name to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A queue instance configured for the relevant topic.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Async/SyncQueue</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.publish">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PBM</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.publish" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously publishes a Protobuf message to its corresponding topic.</p>
<p>The destination topic is automatically derived from the message class and
package structure. Messages within a ‘.tasks’ package are automatically
treated as persistent tasks requiring reliable delivery and queuing logic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> – An instance of a class derived from ProtoBunnyMessage.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.publish_result">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">publish_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#publish_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.publish_result" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously publishes a processing result to the results topic of the source message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – The Result object containing the response payload and source message.</p></li>
<li><p><strong>topic</strong> – Optional override for the result topic. Defaults to the
automatically generated ‘.result’ topic associated with the source message.</p></li>
<li><p><strong>correlation_id</strong> – Optional ID used to link this result to a specific request.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.reset_connection">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">reset_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BaseAsyncConnection</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#reset_connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.reset_connection" title="Link to this definition">¶</a></dt>
<dd><p>Resets the singleton connection and returns it.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.run_forever">
<span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">main</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">...</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Awaitable</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#run_forever"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.run_forever" title="Link to this definition">¶</a></dt>
<dd><p>Starts the event loop and keeps the process alive to consume messages.</p>
<p>Installs signal handlers for SIGINT and SIGTERM to trigger an orderly
async shutdown.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>main</strong> – The entry point async function to run before entering the
permanent wait state.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.subscribe">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncCallback</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BaseAsyncQueue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.subscribe" title="Link to this definition">¶</a></dt>
<dd><p>Registers an async callback to consume messages from a specific topic or package.</p>
<p>If a message class is provided, subscribes to that specific topic. If a
module is provided, subscribes to all message types defined within that module.
For shared tasks (identified by the ‘.tasks’ convention), Protobunny
automatically manages shared consumer groups and load balancing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> – The message class (type[PBM]) or module to subscribe to.</p></li>
<li><p><strong>callback</strong> – An async callable that accepts the received message.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The queue object managing the active subscription.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>BaseAsyncQueue</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.subscribe_logger">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">subscribe_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LoggerCallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">LoggingAsyncQueue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#subscribe_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.subscribe_logger" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously subscribes a logging callback to monitor message traffic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_callback</strong> – A custom function to handle log messages. Defaults
to <cite>default_log_callback</cite>.</p></li>
<li><p><strong>prefix</strong> – An optional subject/topic prefix to filter logged messages.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The specialized async queue object for logging.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>LoggingAsyncQueue</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.subscribe_results">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">subscribe_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncCallback</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BaseAsyncQueue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#subscribe_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.subscribe_results" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously subscribes to result topics for a message type or package.</p>
<p>Used by services that need to listen for completion signals or data
returned by workers processing specific message types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> – The message class or module whose results should be monitored.</p></li>
<li><p><strong>callback</strong> – The async function to execute when a result is received.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The queue object managing the result subscription.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>BaseAsyncQueue</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.unsubscribe">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.unsubscribe" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously removes a subscription for a specific message or package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> – The message class or module to unsubscribe from.</p></li>
<li><p><strong>if_unused</strong> – If True, only unsubscribes if no other callbacks are attached.</p></li>
<li><p><strong>if_empty</strong> – If True, only unsubscribes if the local message buffer is empty.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.unsubscribe_all">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">unsubscribe_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#unsubscribe_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.unsubscribe_all" title="Link to this definition">¶</a></dt>
<dd><p>Asynchronously stops all message consumption by canceling every subscription.</p>
<p>Clears standard subscriptions, result listeners, and task workers. Typically
invoked during graceful application shutdown.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_unused</strong> – Policy for evaluating unused standard queues.</p></li>
<li><p><strong>if_empty</strong> – Policy for evaluating empty standard queues.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.asyncio.unsubscribe_results">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.</span></span><span class="sig-name descname"><span class="pre">unsubscribe_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio.html#unsubscribe_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.unsubscribe_results" title="Link to this definition">¶</a></dt>
<dd><p>Remove all in-process subscriptions for a message/package result topic</p>
</dd></dl>

</div></blockquote>
</section>
<section id="core-package-sync">
<h2>Core Package Sync<a class="headerlink" href="#core-package-sync" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>A module providing support for messaging and communication using the configured broker as the backend.</p>
<p>This module includes functionality for publishing, subscribing, and managing message queues,
as well as dynamically managing imports and configurations for the backend.</p>
<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">ConnectionError</span></span><a class="reference internal" href="_modules/protobunny/exceptions.html#ConnectionError"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Raised when connection operations fail.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">RequeueMessage</span></span><a class="reference internal" href="_modules/protobunny/exceptions.html#RequeueMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Raise when a message could not be handled but should be requeued.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.BaseSyncConnection" title="protobunny.backends.BaseSyncConnection"><span class="pre">BaseSyncConnection</span></a></span></span><a class="reference internal" href="_modules/protobunny.html#connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Establishes a connection to the configured messaging broker.</p>
<p>This method initializes and returns a singleton connection. Subsequent calls
return the existing connection instance unless it has been explicitly
disconnected.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Backend-specific connection arguments (e.g., host, port,
credentials, or protocol-specific tuning parameters).</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The active connection singleton.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.backends.BaseSyncConnection" title="protobunny.backends.BaseSyncConnection">BaseSyncConnection</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Closes the active connection to the broker.</p>
<p>Gracefully terminates heartbeats and background networking tasks. Safe to
call if no connection is active.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">get_backend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">backend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ModuleType</span></span></span><a class="reference internal" href="_modules/protobunny/helpers.html#get_backend"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Retrieve and import the specified backend module.</p>
<p>Load the backend module based on the provided name or falls back
to the default backend specified in the configuration. If the backend is unavailable
or cannot be imported, it exits the program.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>backend</strong> (<em>str</em><em> | </em><em>None</em>) – The name of the backend to import. If None, the backend from
the configuration is used.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The imported backend module.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PBM</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Retrieves the current number of pending messages in a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>msg_type</strong> – The message instance or class</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The count of messages waiting to be processed, or None</dt><dd><p>if the backend does not support count retrieval for this queue type.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PBM</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Publishes a Protobuf message to its corresponding topic.</p>
<p>The destination topic is automatically derived from the message class and
package structure. Messages within a ‘.tasks’ package are automatically
treated as persistent tasks requiring reliable delivery and queuing logic
across all supported backends.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> – An instance of a class derived from ProtoBunnyMessage.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">publish_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#publish_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Publishes a processing result to be consumed by results subscribers (See subscribe_results).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – The Result object containing the response payload and source message from which the Result was generated.</p></li>
<li><p><strong>topic</strong> – Optional override for the result topic. Defaults to the
automatically generated ‘.result’ topic associated with the source message.</p></li>
<li><p><strong>correlation_id</strong> – Optional ID used to link this result to a specific request.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">reset_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.BaseSyncConnection" title="protobunny.backends.BaseSyncConnection"><span class="pre">BaseSyncConnection</span></a></span></span><a class="reference internal" href="_modules/protobunny.html#reset_connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Resets the singleton connection and returns it.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">run_forever</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#run_forever"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Blocks the main thread to maintain active message consumption.</p>
<p>Installs signal handlers for SIGINT and SIGTERM to trigger an orderly
shutdown, ensuring all subscriptions are canceled and the connection
is closed before the process exits.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg_or_msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SyncCallback</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.BaseSyncQueue" title="protobunny.backends.BaseSyncQueue"><span class="pre">BaseSyncQueue</span></a></span></span><a class="reference internal" href="_modules/protobunny.html#subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Registers a callback to consume messages from a specific topic or package.</p>
<p>If a message class is provided, subscribes to that specific topic. If a
module is provided, subscribes to all message types defined within that module.
For shared tasks (identified by the ‘.tasks’ convention), Protobunny
automatically manages shared consumer groups and load balancing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg_or_msg</strong> – The message class (type[PBM]) or module to subscribe to.</p></li>
<li><p><strong>callback</strong> – The function to execute when a message is received.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The queue object managing the active subscription.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.backends.BaseSyncQueue" title="protobunny.backends.BaseSyncQueue">BaseSyncQueue</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">subscribe_logger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">LoggerCallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.LoggingSyncQueue" title="protobunny.backends.LoggingSyncQueue"><span class="pre">LoggingSyncQueue</span></a></span></span><a class="reference internal" href="_modules/protobunny.html#subscribe_logger"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Subscribes a specialized logging callback to monitor message traffic.</p>
<p>This creates a logging-specific queue that captures and logs metadata
for messages matching the optional prefix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>log_callback</strong> – A custom function to handle log messages. Defaults
to <cite>default_log_callback</cite> (logs routing key, cid, and content).</p></li>
<li><p><strong>prefix</strong> – An optional subject/topic prefix to filter which messages
are logged.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The specialized queue object for logging.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.backends.LoggingSyncQueue" title="protobunny.backends.LoggingSyncQueue">LoggingSyncQueue</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">subscribe_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SyncCallback</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.BaseSyncQueue" title="protobunny.backends.BaseSyncQueue"><span class="pre">BaseSyncQueue</span></a></span></span><a class="reference internal" href="_modules/protobunny.html#subscribe_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Subscribes to result topics for a specific message type or package.</p>
<p>Used by services that need to listen for completion signals or data
returned by workers processing specific message types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> – The message class or module whose results should be monitored.</p></li>
<li><p><strong>callback</strong> – The function to execute when a result message is received.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The queue object managing the result subscription.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.backends.BaseSyncQueue" title="protobunny.backends.BaseSyncQueue">BaseSyncQueue</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Cancels an active subscription for a specific message type or package.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pkg</strong> – The message class or module to unsubscribe from.</p></li>
<li><p><strong>if_unused</strong> – If True, only unsubscribes if no other callbacks are attached.</p></li>
<li><p><strong>if_empty</strong> – If True, only unsubscribes if the buffer is empty.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">unsubscribe_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#unsubscribe_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Stops all message consumption by canceling every in-process subscription.</p>
<p>Clears standard subscriptions, result listeners, and task workers. Typically
invoked during graceful application shutdown.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_unused</strong> – Policy for evaluating unused standard queues.</p></li>
<li><p><strong>if_empty</strong> – Policy for evaluating empty standard queues.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">protobunny.</span></span><span class="sig-name descname"><span class="pre">unsubscribe_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pkg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ModuleType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny.html#unsubscribe_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Remove all in-process subscriptions for a message results topic</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pkg</strong> – The message class or module to unsubscribe from its results topic.</p>
</dd>
</dl>
</dd></dl>

</div></blockquote>
</section>
<section id="models">
<h2>Models<a class="headerlink" href="#models" title="Link to this heading">¶</a></h2>
<blockquote>
<div><dl class="py class" id="module-protobunny.models">
<dt class="sig sig-object py" id="protobunny.models.BaseQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">BaseQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/models.html#BaseQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.BaseQueue" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.models.Envelope">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">Envelope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delivery_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">routing_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/models.html#Envelope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.Envelope" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">IncomingMessageProtocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/models.html#IncomingMessageProtocol"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol" title="Link to this definition">¶</a></dt>
<dd><p>Defines a protocol for incoming messages in protobunny messaging system.</p>
<p>This protocol establishes the set of attributes and methods required for
handling an incoming message.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol.body">
<span class="sig-name descname"><span class="pre">body</span></span><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol.body" title="Link to this definition">¶</a></dt>
<dd><p>The raw message content.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol.routing_key">
<span class="sig-name descname"><span class="pre">routing_key</span></span><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol.routing_key" title="Link to this definition">¶</a></dt>
<dd><p>The routing key associated with the message,
which determines the message’s destination.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol.correlation_id">
<span class="sig-name descname"><span class="pre">correlation_id</span></span><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol.correlation_id" title="Link to this definition">¶</a></dt>
<dd><p>An identifier that correlates the message
with a specific request or context.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Optional[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol.delivery_mode">
<span class="sig-name descname"><span class="pre">delivery_mode</span></span><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol.delivery_mode" title="Link to this definition">¶</a></dt>
<dd><p>The delivery mode of the message, which could signify
options like persistence or transient state.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol.ack">
<span class="sig-name descname"><span class="pre">ack</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/models.html#IncomingMessageProtocol.ack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol.ack" title="Link to this definition">¶</a></dt>
<dd><p>Acknowledges the successful processing of the message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.IncomingMessageProtocol.reject">
<span class="sig-name descname"><span class="pre">reject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">requeue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/models.html#IncomingMessageProtocol.reject"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.IncomingMessageProtocol.reject" title="Link to this definition">¶</a></dt>
<dd><p>Rejects the message, with an optional flag indicating
whether it should be requeued for processing.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">MessageMixin</span></span><a class="reference internal" href="_modules/protobunny/models.html#MessageMixin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MessageMixin" title="Link to this definition">¶</a></dt>
<dd><p>Utility mixin for protobunny messages.</p>
<dl class="py property">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.json_content_fields">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">json_content_fields</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#protobunny.models.MessageMixin.json_content_fields" title="Link to this definition">¶</a></dt>
<dd><p>the list of fieldnames that are of type commons.JsonContent.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.make_result">
<span class="sig-name descname"><span class="pre">make_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">return_code</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ReturnCode</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Result</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#MessageMixin.make_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MessageMixin.make_result" title="Link to this definition">¶</a></dt>
<dd><p>Returns a pb.results.Result message for the message,
using the betterproto.lib.std.google.protobuf.Any message type.</p>
<p>The property <cite>result.source</cite> represents the source message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>return_code</strong></p></li>
<li><p><strong>error</strong></p></li>
<li><p><strong>return_value</strong></p></li>
</ul>
</dd>
</dl>
<p>Returns: a Result message.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.result_topic">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">result_topic</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#protobunny.models.MessageMixin.result_topic" title="Link to this definition">¶</a></dt>
<dd><p>Build the result topic name for the message.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.source">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">source</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">PBM</span></em><a class="headerlink" href="#protobunny.models.MessageMixin.source" title="Link to this definition">¶</a></dt>
<dd><p>Return the source message from a Result</p>
<p>The source message is stored as a protobuf.Any message, with its type info  and serialized value.
The <cite>Result.source_message.type_url</cite> is used to instantiate the right class to deserialize the source message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">casing:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">bool],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">camel_case&gt;,</span> <span class="pre">include_default_values:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/protobunny/models.html#MessageMixin.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MessageMixin.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Returns a JSON serializable dict representation of this object.</p>
<p>Note: betterproto <cite>to_dict</cite> converts INT64 to strings, to allow js compatibility.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.to_json">
<span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">indent:</span> <span class="pre">None</span> <span class="pre">|</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">include_default_values:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">casing:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">bool],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">camel_case&gt;</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#MessageMixin.to_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MessageMixin.to_json" title="Link to this definition">¶</a></dt>
<dd><p>Overwrite the betterproto to_json to use the custom encoder</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.to_pydict">
<span class="sig-name descname"><span class="pre">to_pydict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">casing:</span> <span class="pre">~typing.Callable[[str,</span> <span class="pre">bool],</span> <span class="pre">str]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">camel_case&gt;,</span> <span class="pre">include_default_values:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/protobunny/models.html#MessageMixin.to_pydict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MessageMixin.to_pydict" title="Link to this definition">¶</a></dt>
<dd><p>Returns a dict representation of this object. Uses enum names instead of int values. Useful for logging</p>
<p>Conversely to the <cite>to_dict</cite> method, betterproto <cite>to_pydict</cite> doesn’t convert INT64 to strings.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.topic">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">topic</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#protobunny.models.MessageMixin.topic" title="Link to this definition">¶</a></dt>
<dd><p>Build the topic name for the message.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.type_url">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type_url</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#protobunny.models.MessageMixin.type_url" title="Link to this definition">¶</a></dt>
<dd><p>Return the class fqn for this message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.models.MessageMixin.validate_required_fields">
<span class="sig-name descname"><span class="pre">validate_required_fields</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#MessageMixin.validate_required_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MessageMixin.validate_required_fields" title="Link to this definition">¶</a></dt>
<dd><p>Raises a MissingRequiredFields if non optional fields are missing.
Note: Ignore missing repeated fields.
This check happens during serialization (see MessageMixin.__bytes__ method).</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="protobunny.models.MissingRequiredFields">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">MissingRequiredFields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PBM</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">missing_fields</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/models.html#MissingRequiredFields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.MissingRequiredFields" title="Link to this definition">¶</a></dt>
<dd><p>Exception raised by MessageMixin.validate_required_fields when required fields are missing.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.models.ProtoBunnyMessage">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">ProtoBunnyMessage</span></span><a class="reference internal" href="_modules/protobunny/models.html#ProtoBunnyMessage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.ProtoBunnyMessage" title="Link to this definition">¶</a></dt>
<dd><p>Base class for all protobunny messages.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.models.deserialize_message">
<span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">deserialize_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage" title="protobunny.models.ProtoBunnyMessage"><span class="pre">ProtoBunnyMessage</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#deserialize_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.deserialize_message" title="Link to this definition">¶</a></dt>
<dd><p>Deserialize the body of a serialized pika message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – str. The topic. It’s used to determine the type of message.</p></li>
<li><p><strong>body</strong> – bytes. The serialized message</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A deserialized message.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.models.deserialize_result_message">
<span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">deserialize_result_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Result</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#deserialize_result_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.deserialize_result_message" title="Link to this definition">¶</a></dt>
<dd><p>Deserialize the result message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>body</strong> – bytes. The serialized protobunny.core.results.Result</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Instance of Result</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.models.get_body">
<span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">get_body</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol" title="protobunny.models.IncomingMessageProtocol"><span class="pre">IncomingMessageProtocol</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#get_body"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.get_body" title="Link to this definition">¶</a></dt>
<dd><p>Get the json string representation of the message body to use for the logger service.
If message couldn’t be parsed, it returns the raw content.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.models.get_message_class_from_topic">
<span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">get_message_class_from_topic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage" title="protobunny.models.ProtoBunnyMessage"><span class="pre">ProtoBunnyMessage</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Result</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#get_message_class_from_topic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.get_message_class_from_topic" title="Link to this definition">¶</a></dt>
<dd><p>Return the message class from a topic with lazy import of the user library</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> – the topic that represents the message queue, mapped to the message class
example for redis mylib:tasks:TaskMessage -&gt; mylib.tasks.TaskMessage class</p>
</dd>
</dl>
<p>Returns: the message class for the topic or None if the topic is not recognized</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.models.get_message_class_from_type_url">
<span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">get_message_class_from_type_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">type</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage" title="protobunny.models.ProtoBunnyMessage"><span class="pre">ProtoBunnyMessage</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/protobunny/models.html#get_message_class_from_type_url"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.get_message_class_from_type_url" title="Link to this definition">¶</a></dt>
<dd><p>Return the message class from a topic with lazy import of the user library</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>url</strong> – the fullname message class</p>
</dd>
</dl>
<p>Returns: the message class</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="protobunny.models.to_json_content">
<span class="sig-prename descclassname"><span class="pre">protobunny.models.</span></span><span class="sig-name descname"><span class="pre">to_json_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">JsonContent</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/models.html#to_json_content"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.models.to_json_content" title="Link to this definition">¶</a></dt>
<dd><p>Serialize an object and build a JsonContent message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> – A json-serializable object</p>
</dd>
</dl>
<p>Returns: A pb.commons.JsonContent instance</p>
</dd></dl>

<dl class="py class" id="module-protobunny.backends">
<dt class="sig sig-object py" id="protobunny.backends.BaseAsyncConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.</span></span><span class="sig-name descname"><span class="pre">BaseAsyncConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends.html#BaseAsyncConnection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseAsyncConnection" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.BaseConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.</span></span><span class="sig-name descname"><span class="pre">BaseConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends.html#BaseConnection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseConnection" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.</span></span><span class="sig-name descname"><span class="pre">BaseSyncConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.connect">
<span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.connect" title="Link to this definition">¶</a></dt>
<dd><p>Establish Sync connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Maximum time to wait for connection (seconds)</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If connection fails</p></li>
<li><p><strong>TimeoutError</strong> – If connection times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Close sync and the underlying async connections and stop event loop.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Maximum time to wait for cleanup (seconds)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.get_connection">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.BaseSyncConnection" title="protobunny.backends.BaseSyncConnection"><span class="pre">BaseSyncConnection</span></a></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.get_connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Get singleton instance (sync).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.get_consumer_count">
<span class="sig-name descname"><span class="pre">get_consumer_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.get_consumer_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.get_consumer_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the number of messages in a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The queue topic</p></li>
<li><p><strong>timeout</strong> – Maximum time to wait (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Number of messages in the queue</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p></li>
<li><p><strong>TimeoutError</strong> – If operation times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.get_message_count">
<span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.get_message_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the number of messages in a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The queue topic</p></li>
<li><p><strong>timeout</strong> – Maximum time to wait (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Number of messages in the queue</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p></li>
<li><p><strong>TimeoutError</strong> – If operation times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.is_connected">
<span class="sig-name descname"><span class="pre">is_connected</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.is_connected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.is_connected" title="Link to this definition">¶</a></dt>
<dd><p>Check if connection is established.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.publish">
<span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol" title="protobunny.models.IncomingMessageProtocol"><span class="pre">IncomingMessageProtocol</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">mandatory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">immediate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.publish" title="Link to this definition">¶</a></dt>
<dd><p>Publish a message to a topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The routing key/topic</p></li>
<li><p><strong>message</strong> – The message to publish</p></li>
<li><p><strong>mandatory</strong> – If True, raise error if message cannot be routed</p></li>
<li><p><strong>immediate</strong> – If True, publish message immediately to the queue</p></li>
<li><p><strong>timeout</strong> – Maximum time to wait for publish (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p></li>
<li><p><strong>TimeoutError</strong> – If operation times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.purge">
<span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.purge" title="Link to this definition">¶</a></dt>
<dd><p>Empty a queue of all messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The queue topic to purge</p></li>
<li><p><strong>timeout</strong> – Maximum time to wait (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p></li>
<li><p><strong>TimeoutError</strong> – If operation times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.subscribe">
<span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.subscribe" title="Link to this definition">¶</a></dt>
<dd><p>Subscribe to a queue/topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The routing key/topic to subscribe to</p></li>
<li><p><strong>callback</strong> – Function to handle incoming messages</p></li>
<li><p><strong>shared</strong> – if True, use shared queue (round-robin delivery)</p></li>
<li><p><strong>timeout</strong> – Maximum time to wait for subscription (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Subscription tag identifier</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p></li>
<li><p><strong>TimeoutError</strong> – If operation times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncConnection.unsubscribe">
<span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncConnection.unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncConnection.unsubscribe" title="Link to this definition">¶</a></dt>
<dd><p>Unsubscribe from a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_unused</strong></p></li>
<li><p><strong>if_empty</strong></p></li>
<li><p><strong>tag</strong> – Subscription identifier returned from subscribe()</p></li>
<li><p><strong>timeout</strong> – Maximum time to wait (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TimeoutError</strong> – If operation times out</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.</span></span><span class="sig-name descname"><span class="pre">BaseSyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.get_consumer_count">
<span class="sig-name descname"><span class="pre">get_consumer_count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.get_consumer_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.get_consumer_count" title="Link to this definition">¶</a></dt>
<dd><p>Get current message count.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.get_message_count">
<span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.get_message_count" title="Link to this definition">¶</a></dt>
<dd><p>Get current message count.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.publish">
<span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage" title="protobunny.models.ProtoBunnyMessage"><span class="pre">ProtoBunnyMessage</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.publish" title="Link to this definition">¶</a></dt>
<dd><p>Publish a message to the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> – a ProtoBunnyMessage message</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.publish_result">
<span class="sig-name descname"><span class="pre">publish_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.publish_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.publish_result" title="Link to this definition">¶</a></dt>
<dd><p>Publish a message to the results topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – a amlogic_messages.results.Result message</p></li>
<li><p><strong>topic</strong></p></li>
<li><p><strong>correlation_id</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.purge">
<span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.purge" title="Link to this definition">¶</a></dt>
<dd><p>Delete all messages from the queue.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.subscribe">
<span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">PBM</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.subscribe" title="Link to this definition">¶</a></dt>
<dd><p>Subscribe to messages from the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>callback</strong></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.subscribe_results">
<span class="sig-name descname"><span class="pre">subscribe_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">Result</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.subscribe_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.subscribe_results" title="Link to this definition">¶</a></dt>
<dd><p>Subscribe to results from the queue.</p>
<p>See the deserialize_result method for return params.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>callback</strong> – function to call when results come in.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.unsubscribe">
<span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.unsubscribe" title="Link to this definition">¶</a></dt>
<dd><p>Unsubscribe from the queue.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.BaseSyncQueue.unsubscribe_results">
<span class="sig-name descname"><span class="pre">unsubscribe_results</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#BaseSyncQueue.unsubscribe_results"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.BaseSyncQueue.unsubscribe_results" title="Link to this definition">¶</a></dt>
<dd><p>Unsubscribe from results. Will always delete the underlying queues</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.LoggingSyncQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.</span></span><span class="sig-name descname"><span class="pre">LoggingSyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends.html#LoggingSyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.LoggingSyncQueue" title="Link to this definition">¶</a></dt>
<dd><p>Represents a specialized queue for logging purposes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">protobunny</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pb</span><span class="o">.</span><span class="n">subscribe_logger</span><span class="p">()</span>  <span class="c1"># it uses the default logger_callback</span>
</pre></div>
</div>
<p>You can add a custom callback that accepts the envelope message from the backend and msg_content: str as arguments.
The type of message will respect the protocol IncomingMessageProtocol</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">log_callback</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="s2">&quot;IncomingMessageProtocol&quot;</span><span class="p">,</span> <span class="n">msg_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">body</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pb</span><span class="o">.</span><span class="n">subscribe_logger</span><span class="p">(</span><span class="n">log_callback</span><span class="p">)</span>
</pre></div>
</div>
<p>You can use functools.partial to add more arguments</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span><span class="w"> </span><span class="nf">log_callback_with_args</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">aio_pika</span><span class="o">.</span><span class="n">IncomingMessage</span><span class="p">,</span> <span class="n">msg_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">maxlength</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="n">maxlength</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">functools</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">log_callback_with_args</span><span class="p">,</span> <span class="n">maxlength</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pb</span><span class="o">.</span><span class="n">subscribe_logger</span><span class="p">(</span><span class="n">log_callback_with_args</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.LoggingSyncQueue.publish">
<span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage" title="protobunny.models.ProtoBunnyMessage"><span class="pre">ProtoBunnyMessage</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#LoggingSyncQueue.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.LoggingSyncQueue.publish" title="Link to this definition">¶</a></dt>
<dd><p>Publish a message to the queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>message</strong> – a ProtoBunnyMessage message</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.LoggingSyncQueue.publish_result">
<span class="sig-name descname"><span class="pre">publish_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends.html#LoggingSyncQueue.publish_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.LoggingSyncQueue.publish_result" title="Link to this definition">¶</a></dt>
<dd><p>Publish a message to the results topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> – a amlogic_messages.results.Result message</p></li>
<li><p><strong>topic</strong></p></li>
<li><p><strong>correlation_id</strong></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="rabbitmq-aio-backend">
<h2>RabbitMQ aio backend<a class="headerlink" href="#rabbitmq-aio-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.asyncio.backends.rabbitmq.connection"><span id="module-protobunny.asyncio.backends.rabbitmq"></span>Implements a RabbitMQ Connection with both sync and async support using aio_pika.</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.rabbitmq.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_threads</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchange_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'amq.topic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dl_exchange</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'protobunny-dlx'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dl_queue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'protobunny-dlq'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heartbeat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Async RabbitMQ Connection wrapper.</p>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.connect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection" title="protobunny.asyncio.backends.rabbitmq.connection.Connection"><span class="pre">Connection</span></a></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.connect" title="Link to this definition">¶</a></dt>
<dd><p>Establish RabbitMQ connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Maximum time to wait for connection establishment (seconds)</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If connection fails</p></li>
<li><p><strong>asyncio.TimeoutError</strong> – If connection times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.connection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">AbstractRobustConnection</span></em><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.connection" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection object.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.disconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Close RabbitMQ connection and cleanup resources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Maximum time to wait for cleanup (seconds)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.exchange">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">exchange</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">AbstractExchange</span></em><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.exchange" title="Link to this definition">¶</a></dt>
<dd><p>Get the exchange object.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.get_consumer_count">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_consumer_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.get_consumer_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.get_consumer_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the number of messages in a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> – The queue topic</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.get_message_count">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.get_message_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the number of messages in a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> – The queue topic</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Number of messages currently in the queue</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.is_connected_event">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_connected_event</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Event</span></em><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.is_connected_event" title="Link to this definition">¶</a></dt>
<dd><p>Lazily create the event in the current running loop.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.lock">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lock</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Lock</span></em><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.lock" title="Link to this definition">¶</a></dt>
<dd><p>Lazy instance lock.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.publish">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Message</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mandatory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">immediate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.publish" title="Link to this definition">¶</a></dt>
<dd><p>Publish a message to a topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The routing key/topic</p></li>
<li><p><strong>message</strong> – The message to publish</p></li>
<li><p><strong>message</strong> – The message to publish</p></li>
<li><p><strong>mandatory</strong> – If True, raise an error if message cannot be routed</p></li>
<li><p><strong>immediate</strong> – IF True, send message immediately to the queue</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.purge">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.purge" title="Link to this definition">¶</a></dt>
<dd><p>Empty a queue of all messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> – The queue topic to purge</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.setup_queue">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AbstractQueue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.setup_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.setup_queue" title="Link to this definition">¶</a></dt>
<dd><p>Set up a RabbitMQ queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – the queue/routing key topic</p></li>
<li><p><strong>shared</strong> – if True, all clients share the same queue and receive messages
round-robin (task queue). If False, each client has its own anonymous
queue and all receive copies of each message (pub/sub).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The configured queue</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.subscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.subscribe" title="Link to this definition">¶</a></dt>
<dd><p>Subscribe to a queue/topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The routing key/topic to subscribe to</p></li>
<li><p><strong>callback</strong> – Function to handle incoming messages. Should accept an
aio_pika.IncomingMessage parameter.</p></li>
<li><p><strong>shared</strong> – if True, use shared queue for round-robin delivery (task queue).
If False, use anonymous queue where all subscribers receive all messages
(pub/sub).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Subscription tag identifier needed to unsubscribe later</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">handle_message</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="n">aio_pika</span><span class="o">.</span><span class="n">IncomingMessage</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Received: </span><span class="si">{</span><span class="n">message</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">tag</span> <span class="o">=</span> <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;my.events.*&quot;</span><span class="p">,</span> <span class="n">handle_message</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.connection.Connection.unsubscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_unused</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">if_empty</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/connection.html#Connection.unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.unsubscribe" title="Link to this definition">¶</a></dt>
<dd><p>Unsubscribe from a queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>if_empty</strong> – will delete non empty queues if False</p></li>
<li><p><strong>if_unused</strong> – will delete used queues if False</p></li>
<li><p><strong>tag</strong> – The subscription identifier returned from subscribe()</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If tag is not found</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class" id="module-protobunny.asyncio.backends.rabbitmq.queues">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.queues.AsyncQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.rabbitmq.queues.</span></span><span class="sig-name descname"><span class="pre">AsyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/queues.html#AsyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.queues.AsyncQueue" title="Link to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.rabbitmq.queues.AsyncQueue.send_message">
<em class="property"><span class="pre">async</span><span class="w"> </span><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/rabbitmq/queues.html#AsyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.rabbitmq.queues.AsyncQueue.send_message" title="Link to this definition">¶</a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
<li><p><strong>persistent</strong> – if true will use aio_pika.DeliveryMode.PERSISTENT</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="mosquitto-aio-backend">
<h2>Mosquitto aio backend<a class="headerlink" href="#mosquitto-aio-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.asyncio.backends.mosquitto.connection"><span id="module-protobunny.asyncio.backends.mosquitto"></span>Implements a Mosquitto (MQTT) Connection with both sync and async support</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.mosquitto.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.mosquitto.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_threads</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/mosquitto/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.mosquitto.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Async Mosquitto Connection wrapper using aiomqtt.</p>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.mosquitto.connection.Connection.build_topic_key">
<span class="sig-name descname"><span class="pre">build_topic_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/mosquitto/connection.html#Connection.build_topic_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.build_topic_key" title="Link to this definition">¶</a></dt>
<dd><p>Joins project prefix with topic using the configured delimiter.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.mosquitto.connection.Connection.is_connected_event">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_connected_event</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Event</span></em><a class="headerlink" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.is_connected_event" title="Link to this definition">¶</a></dt>
<dd><p>Lazily create the event in the current running loop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.mosquitto.connection.Connection.purge">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/mosquitto/connection.html#Connection.purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.purge" title="Link to this definition">¶</a></dt>
<dd><p>Clears the retained message for the topic.
Note: This does not affect messages currently in flight to
offline clients with persistent sessions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.mosquitto.connection.Connection.subscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/mosquitto/connection.html#Connection.subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.subscribe" title="Link to this definition">¶</a></dt>
<dd><p>Subscribes to a topic and starts a consumer loop in the background.
:param topic:
:param callback:
:param shared:</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The consumer tag</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.mosquitto.connection.Connection.unsubscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/mosquitto/connection.html#Connection.unsubscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.unsubscribe" title="Link to this definition">¶</a></dt>
<dd><p>Gracefully stops a consumer loop and unsubscribes from the broker.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.mosquitto.queues.</span></span><span class="sig-name descname"><span class="pre">AsyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/mosquitto/queues.html#AsyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd></dd></dl>

</div></blockquote>
</section>
<section id="redis-aio-backend">
<h2>Redis aio backend<a class="headerlink" href="#redis-aio-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.asyncio.backends.redis.connection"><span id="module-protobunny.asyncio.backends.redis"></span>Implements a Redis Connection</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.redis.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_threads</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Async Redis Connection wrapper.</p>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.connect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection" title="protobunny.asyncio.backends.redis.connection.Connection"><span class="pre">Connection</span></a></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.connect" title="Link to this definition">¶</a></dt>
<dd><p>Establish Redis connection.</p>
<p>Args:</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If connection fails</p></li>
<li><p><strong>asyncio.TimeoutError</strong> – If connection times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.connection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Redis</span></em><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.connection" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection object.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.disconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Close Redis connection and cleanup resources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Maximum time to wait for cleanup (seconds)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.get_consumer_count">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_consumer_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.get_consumer_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.get_consumer_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the total number of consumers across all groups for a topic.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> – The stream topic</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Total number of consumers</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.get_message_count">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.get_message_count" title="Link to this definition">¶</a></dt>
<dd><p>Get the number of messages in the Redis Stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> – The stream topic name</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Number of entries currently in the stream.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.is_connected_event">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_connected_event</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Event</span></em><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.is_connected_event" title="Link to this definition">¶</a></dt>
<dd><p>Lazily create the event in the current running loop.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.lock">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lock</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Lock</span></em><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.lock" title="Link to this definition">¶</a></dt>
<dd><p>Lazy instance lock.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.publish">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol" title="protobunny.models.IncomingMessageProtocol"><span class="pre">IncomingMessageProtocol</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.publish" title="Link to this definition">¶</a></dt>
<dd><p>Simulates Topic Exchange routing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.purge">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reset_groups</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.purge" title="Link to this definition">¶</a></dt>
<dd><p>Empty a Redis Stream and optionally clear all consumer groups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The stream/topic name to purge</p></li>
<li><p><strong>reset_groups</strong> – If True, deletes all consumer groups (resets consumer count to 0)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.reset_stream_groups">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">reset_stream_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stream_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.reset_stream_groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.reset_stream_groups" title="Link to this definition">¶</a></dt>
<dd><p>Hard reset: Deletes all consumer groups for a topic. To be used with caution.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.setup_queue">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.setup_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.setup_queue" title="Link to this definition">¶</a></dt>
<dd><p>Set up a Redis Stream and Consumer Group for tasks if shared, otherwise use Pub/Sub.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The stream key / routing key (queue name)</p></li>
<li><p><strong>shared</strong> – If True, uses a fixed group name for round-robin.
If False, just creates metadata to use to subscribe the callback</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of the consumer group to use</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.redis.connection.Connection.subscribe">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/connection.html#Connection.subscribe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.redis.connection.Connection.subscribe" title="Link to this definition">¶</a></dt>
<dd><p>Subscribe to Redis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – The stream key/topic to subscribe to</p></li>
<li><p><strong>callback</strong> – Function to handle incoming messages.</p></li>
<li><p><strong>shared</strong> – If True, uses a shared consumer group (round-robin).
If False, uses a unique group for this instance and let redis pubsub manage the routing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A unique subscription tag used to stop the consumer later.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.redis.queues.</span></span><span class="sig-name descname"><span class="pre">AsyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/redis/queues.html#AsyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd></dd></dl>

</div></blockquote>
</section>
<section id="nats-aio-backend">
<h2>NATS aio backend<a class="headerlink" href="#nats-aio-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.asyncio.backends.nats.connection"><span id="module-protobunny.asyncio.backends.nats"></span>Implements a NATS Connection</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.nats.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.nats.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_threads</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefetch_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heartbeat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1200</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/nats/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.nats.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Async NATS Connection wrapper.</p>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.nats.connection.Connection.connect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection" title="protobunny.asyncio.backends.nats.connection.Connection"><span class="pre">Connection</span></a></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/nats/connection.html#Connection.connect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.nats.connection.Connection.connect" title="Link to this definition">¶</a></dt>
<dd><p>Establish NATS connection.</p>
<p>Args:</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If connection fails</p></li>
<li><p><strong>asyncio.TimeoutError</strong> – If connection times out</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.nats.connection.Connection.connection">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">connection</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Client</span></em><a class="headerlink" href="#protobunny.asyncio.backends.nats.connection.Connection.connection" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection object.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#protobunny.asyncio.ConnectionError" title="protobunny.asyncio.ConnectionError"><strong>ConnectionError</strong></a> – If not connected</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.nats.connection.Connection.disconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/nats/connection.html#Connection.disconnect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.asyncio.backends.nats.connection.Connection.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Close NATS connection and cleanup resources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>timeout</strong> – Maximum time to wait for cleanup (seconds)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.nats.connection.Connection.is_connected_event">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_connected_event</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Event</span></em><a class="headerlink" href="#protobunny.asyncio.backends.nats.connection.Connection.is_connected_event" title="Link to this definition">¶</a></dt>
<dd><p>Lazily create the event in the current running loop.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="protobunny.asyncio.backends.nats.connection.Connection.lock">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lock</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Lock</span></em><a class="headerlink" href="#protobunny.asyncio.backends.nats.connection.Connection.lock" title="Link to this definition">¶</a></dt>
<dd><p>Lazy instance lock.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.nats.queues.</span></span><span class="sig-name descname"><span class="pre">AsyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/nats/queues.html#AsyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd></dd></dl>

</div></blockquote>
</section>
<section id="python-aio-backend">
<h2>Python aio backend<a class="headerlink" href="#python-aio-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><dl class="py class" id="module-protobunny.asyncio.backends.python">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.python.connection.</span></span><span class="sig-name descname"><span class="pre">BaseLocalConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#BaseLocalConnection"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Base class with shared logic for python “connections”.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.python.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Asynchronous local connection using asyncio.</p>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#Connection.create_tag"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate subscription tag.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">is_connected</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#Connection.is_connected"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Check if connection is established</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_connected_event</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Event</span></em></dt>
<dd><p>Lazily create the event in the current running loop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Queue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#Connection.setup_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Create appropriate queue type.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.python.connection.</span></span><span class="sig-name descname"><span class="pre">MessageBroker</span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Centralized message broker</p>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_exclusive_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Queue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.create_exclusive_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Create an exclusive queue for a topic.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_shared_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Queue</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.create_shared_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Get or create a shared queue.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_message_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.get_message_count"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Get queue size of the shared queues.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#protobunny.models.Envelope" title="protobunny.models.Envelope"><span class="pre">Envelope</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Publish a message to all relevant queues.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">purge_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.purge_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Empty a shared queue.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_exclusive_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Queue</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.remove_exclusive_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Remove an exclusive queue.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">remove_shared_queues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/connection.html#MessageBroker.remove_shared_queues"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Remove all in process subscriptions for a shared queue.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.asyncio.backends.python.queues.</span></span><span class="sig-name descname"><span class="pre">AsyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/queues.html#AsyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Message queue backed by asyncio.Queue.</p>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/asyncio/backends/python/queues.html#AsyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
<li><p><strong>persistent</strong> – if true will use aio_pika.DeliveryMode.PERSISTENT</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="rabbitmq-backend">
<h2>RabbitMQ backend<a class="headerlink" href="#rabbitmq-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.backends.rabbitmq.connection"><span id="module-protobunny.backends.rabbitmq"></span>Implements a RabbitMQ Connection with both sync and async support using aio_pika.</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.rabbitmq.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.rabbitmq.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/rabbitmq/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.rabbitmq.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Synchronous wrapper around Async Rmq Connection.</p>
<p>Manages a dedicated event loop in a background thread to run async operations.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="s2">&quot;my.topic&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;my.topic&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.backends.rabbitmq.connection.Connection.async_class">
<span class="sig-name descname"><span class="pre">async_class</span></span><a class="headerlink" href="#protobunny.backends.rabbitmq.connection.Connection.async_class" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection" title="protobunny.asyncio.backends.rabbitmq.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class" id="module-protobunny.backends.rabbitmq.queues">
<dt class="sig sig-object py" id="protobunny.backends.rabbitmq.queues.SyncQueue">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.rabbitmq.queues.</span></span><span class="sig-name descname"><span class="pre">SyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/rabbitmq/queues.html#SyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.rabbitmq.queues.SyncQueue" title="Link to this definition">¶</a></dt>
<dd><p>Message queue backed by pika and RabbitMQ.</p>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.rabbitmq.queues.SyncQueue.send_message">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/rabbitmq/queues.html#SyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.rabbitmq.queues.SyncQueue.send_message" title="Link to this definition">¶</a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
<li><p><strong>persistent</strong> – if true will use aio_pika.DeliveryMode.PERSISTENT</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="mosquitto-backend">
<h2>Mosquitto backend<a class="headerlink" href="#mosquitto-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.backends.mosquitto.connection"><span id="module-protobunny.backends.mosquitto"></span>Implements a Mosquitto Connection with sync support.</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.mosquitto.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.mosquitto.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_threads</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/mosquitto/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.mosquitto.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Synchronous Mosquitto Connection wrapper using paho-mqtt.</p>
<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.mosquitto.connection.Connection.get_connection">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#protobunny.backends.mosquitto.connection.Connection" title="protobunny.backends.mosquitto.connection.Connection"><span class="pre">Connection</span></a></span></span><a class="reference internal" href="_modules/protobunny/backends/mosquitto/connection.html#Connection.get_connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.mosquitto.connection.Connection.get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Get singleton instance (sync).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="protobunny.backends.mosquitto.connection.Connection.purge">
<span class="sig-name descname"><span class="pre">purge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/protobunny/backends/mosquitto/connection.html#Connection.purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.mosquitto.connection.Connection.purge" title="Link to this definition">¶</a></dt>
<dd><p>Clears the retained message for the topic by publishing an empty payload.
In Paho, we must wait for the publication to confirm the purge is complete.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.mosquitto.queues.</span></span><span class="sig-name descname"><span class="pre">SyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/mosquitto/queues.html#SyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Message queue backed by pika and RabbitMQ.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/mosquitto/queues.html#SyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="redis-backend">
<h2>Redis backend<a class="headerlink" href="#redis-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.backends.redis.connection"><span id="module-protobunny.backends.redis"></span>Implements a Redis Connection with both sync and async support</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.redis.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.redis.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/redis/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.redis.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Synchronous wrapper around the async connection</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">SyncRedisConnection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="s2">&quot;my.topic&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;my.topic&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.backends.redis.connection.Connection.async_class">
<span class="sig-name descname"><span class="pre">async_class</span></span><a class="headerlink" href="#protobunny.backends.redis.connection.Connection.async_class" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection" title="protobunny.asyncio.backends.redis.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.redis.queues.</span></span><span class="sig-name descname"><span class="pre">SyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/redis/queues.html#SyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Message queue backed by pika and RabbitMQ.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/redis/queues.html#SyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="nats-backend">
<h2>NATS backend<a class="headerlink" href="#nats-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.backends.nats.connection"><span id="module-protobunny.backends.nats"></span>Implements a NATS Connection with sync methods</p>
<dl class="py class">
<dt class="sig sig-object py" id="protobunny.backends.nats.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.nats.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/nats/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#protobunny.backends.nats.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Synchronous wrapper around Async Rmq Connection.</p>
<p>Manages a dedicated event loop in a background thread to run async operations.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">Connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="s2">&quot;my.topic&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;my.topic&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="protobunny.backends.nats.connection.Connection.async_class">
<span class="sig-name descname"><span class="pre">async_class</span></span><a class="headerlink" href="#protobunny.backends.nats.connection.Connection.async_class" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection" title="protobunny.asyncio.backends.nats.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a></p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.nats.queues.</span></span><span class="sig-name descname"><span class="pre">SyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/nats/queues.html#SyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Message queue backed by pika and RabbitMQ.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/nats/queues.html#SyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
<li><p><strong>persistent</strong> – if true will use aio_pika.DeliveryMode.PERSISTENT</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="python-backend">
<h2>Python backend<a class="headerlink" href="#python-backend" title="Link to this heading">¶</a></h2>
<blockquote>
<div><dl class="py class" id="module-protobunny.backends.python">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.python.connection.</span></span><span class="sig-name descname"><span class="pre">BaseLocalConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vhost</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">requeue_delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/python/connection.html#BaseLocalConnection"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Base class with shared logic for python “connections”.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.python.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/python/connection.html#Connection"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Synchronous local connection using threads.</p>
<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">create_tag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="_modules/protobunny/backends/python/connection.html#Connection.create_tag"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Generate subscription tag.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_connected_event</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Event</span></em></dt>
<dd><p>Lazily create the event in the current running loop.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">setup_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shared</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Queue</span></span></span><a class="reference internal" href="_modules/protobunny/backends/python/connection.html#Connection.setup_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Create appropriate queue type.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">protobunny.backends.python.queues.</span></span><span class="sig-name descname"><span class="pre">SyncQueue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/python/queues.html#SyncQueue"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Message queue backed by pika and RabbitMQ.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">send_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">correlation_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">persistent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/protobunny/backends/python/queues.html#SyncQueue.send_message"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Low-level message sending implementation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>topic</strong> – a topic name for direct routing or a routing key with special binding keys</p></li>
<li><p><strong>body</strong> – serialized message (e.g. a serialized protobuf message or a json string)</p></li>
<li><p><strong>correlation_id</strong> – is present for result messages</p></li>
<li><p><strong>persistent</strong> – if true will use aio_pika.DeliveryMode.PERSISTENT</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div></blockquote>
</section>
<section id="logger-service">
<h2>Logger service<a class="headerlink" href="#logger-service" title="Link to this heading">¶</a></h2>
<blockquote>
<div><section id="logging-service">
<span id="module-protobunny.logger"></span><h3>Logging Service<a class="headerlink" href="#logging-service" title="Link to this heading">¶</a></h3>
<p>A program for logging MQTT messages with optional message filtering and length truncation.</p>
<p>This program subscribes to an MQTT queue and logs incoming messages based on user-defined
parameters such as filtering by regex, truncating message content to a maximum length, and
setting logging mode (asynchronous or synchronous). Signal handling is provided to ensure
graceful shutdown.</p>
<dl class="simple">
<dt>Modules:</dt><dd><p>log_callback: Logs incoming MQTT messages to stdout with optional filtering and truncation.
main_sync: Entry point for synchronous logging mode with signal handling.
main: Entry point for asynchronous logging mode with signal handling.</p>
</dd>
</dl>
<p>usage: python -m protobunny.logger [-h] [-f FILTER] [-l MAX_LENGTH] [-m MODE] [-p PREFIX]</p>
<p>MQTT Logger</p>
<dl>
<dt>options:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>show this help message and exit</p>
</dd>
<dt><kbd><span class="option">-f <var>FILTER</var></span>, <span class="option">--filter <var>FILTER</var></span></kbd></dt>
<dd><p>filter messages matching this regex</p>
</dd>
<dt><kbd><span class="option">-l <var>MAX_LENGTH</var></span>, <span class="option">--max-length <var>MAX_LENGTH</var></span></kbd></dt>
<dd><p>cut off messages longer than this</p>
</dd>
<dt><kbd><span class="option">-m <var>MODE</var></span>, <span class="option">--mode <var>MODE</var></span></kbd></dt>
<dd><p>Set async or sync mode. Default is async.</p>
</dd>
<dt><kbd><span class="option">-p <var>PREFIX</var></span>, <span class="option">--prefix <var>PREFIX</var></span></kbd></dt>
<dd><p>Set the prefix for the logger if different from the configured messages-prefix</p>
</dd>
</dl>
</dd>
</dl>
</section>
</div></blockquote>
</section>
<section id="protobunny-utility">
<h2>protobunny utility<a class="headerlink" href="#protobunny-utility" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p id="module-protobunny.wrapper">Protobunny tool</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>protobunny<span class="w"> </span>generate
</pre></div>
</div>
<p>Generate betterproto classes and automatically includes the path to the custom proto types
and add the ProtoBunny mixin for the configured package (i.e. <code class="docutils literal notranslate"><span class="pre">generated-package-name</span></code>).</p>
<p>See <code class="docutils literal notranslate"><span class="pre">protobunny</span> <span class="pre">generate</span> <span class="pre">--help</span></code> for more options.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>protobunny<span class="w"> </span>log
</pre></div>
</div>
<p>Start a logger in console. See <code class="docutils literal notranslate"><span class="pre">protobunny</span> <span class="pre">log</span> <span class="pre">--help</span></code> for more options.</p>
<p>Full configuration for pyproject.toml</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.protobunny]</span>
<span class="n">messages-directory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;messages&#39;</span>
<span class="n">messages-prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;acme&#39;</span>
<span class="n">generated-package-name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;mymessagelib.codegen&#39;</span>
<span class="n">generated-package-root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./&quot;</span>
<span class="n">backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;rabbitmq&quot;</span>
<span class="n">force-required-fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;async&quot;</span>
<span class="n">log-redis-tasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>The following command will generate protobunny decorated betterproto classes in the <cite>mymessagelib/codegen</cite> directory:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>protobunny<span class="w"> </span>generate
</pre></div>
</div>
</div></blockquote>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="recipes.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Recipes</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2026, AM-Flow
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa-brands fa-solid fa-github fa-2x" href="https://github.com/am-flow/protobunny" aria-label="GitHub"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">API Reference</a><ul>
<li><a class="reference internal" href="#core-package-async">Core Package Async</a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.ConnectionError"><code class="docutils literal notranslate"><span class="pre">ConnectionError</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.RequeueMessage"><code class="docutils literal notranslate"><span class="pre">RequeueMessage</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.config_lib"><code class="docutils literal notranslate"><span class="pre">config_lib()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.connect"><code class="docutils literal notranslate"><span class="pre">connect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.disconnect"><code class="docutils literal notranslate"><span class="pre">disconnect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.get_message_count"><code class="docutils literal notranslate"><span class="pre">get_message_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.get_queue"><code class="docutils literal notranslate"><span class="pre">get_queue()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.publish"><code class="docutils literal notranslate"><span class="pre">publish()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.publish_result"><code class="docutils literal notranslate"><span class="pre">publish_result()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.reset_connection"><code class="docutils literal notranslate"><span class="pre">reset_connection()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.run_forever"><code class="docutils literal notranslate"><span class="pre">run_forever()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.subscribe"><code class="docutils literal notranslate"><span class="pre">subscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.subscribe_logger"><code class="docutils literal notranslate"><span class="pre">subscribe_logger()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.subscribe_results"><code class="docutils literal notranslate"><span class="pre">subscribe_results()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.unsubscribe"><code class="docutils literal notranslate"><span class="pre">unsubscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.unsubscribe_all"><code class="docutils literal notranslate"><span class="pre">unsubscribe_all()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.unsubscribe_results"><code class="docutils literal notranslate"><span class="pre">unsubscribe_results()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-package-sync">Core Package Sync</a></li>
<li><a class="reference internal" href="#models">Models</a><ul>
<li><a class="reference internal" href="#protobunny.models.BaseQueue"><code class="docutils literal notranslate"><span class="pre">BaseQueue</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.Envelope"><code class="docutils literal notranslate"><span class="pre">Envelope</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol.body"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol.body</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol.routing_key"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol.routing_key</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol.correlation_id"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol.correlation_id</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol.delivery_mode"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol.delivery_mode</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol.ack"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol.ack()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.IncomingMessageProtocol.reject"><code class="docutils literal notranslate"><span class="pre">IncomingMessageProtocol.reject()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin"><code class="docutils literal notranslate"><span class="pre">MessageMixin</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.json_content_fields"><code class="docutils literal notranslate"><span class="pre">MessageMixin.json_content_fields</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.make_result"><code class="docutils literal notranslate"><span class="pre">MessageMixin.make_result()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.result_topic"><code class="docutils literal notranslate"><span class="pre">MessageMixin.result_topic</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.source"><code class="docutils literal notranslate"><span class="pre">MessageMixin.source</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.to_dict"><code class="docutils literal notranslate"><span class="pre">MessageMixin.to_dict()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.to_json"><code class="docutils literal notranslate"><span class="pre">MessageMixin.to_json()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.to_pydict"><code class="docutils literal notranslate"><span class="pre">MessageMixin.to_pydict()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.topic"><code class="docutils literal notranslate"><span class="pre">MessageMixin.topic</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.type_url"><code class="docutils literal notranslate"><span class="pre">MessageMixin.type_url</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.MessageMixin.validate_required_fields"><code class="docutils literal notranslate"><span class="pre">MessageMixin.validate_required_fields()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protobunny.models.MissingRequiredFields"><code class="docutils literal notranslate"><span class="pre">MissingRequiredFields</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.ProtoBunnyMessage"><code class="docutils literal notranslate"><span class="pre">ProtoBunnyMessage</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.deserialize_message"><code class="docutils literal notranslate"><span class="pre">deserialize_message()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.deserialize_result_message"><code class="docutils literal notranslate"><span class="pre">deserialize_result_message()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.get_body"><code class="docutils literal notranslate"><span class="pre">get_body()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.get_message_class_from_topic"><code class="docutils literal notranslate"><span class="pre">get_message_class_from_topic()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.get_message_class_from_type_url"><code class="docutils literal notranslate"><span class="pre">get_message_class_from_type_url()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.models.to_json_content"><code class="docutils literal notranslate"><span class="pre">to_json_content()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseAsyncConnection"><code class="docutils literal notranslate"><span class="pre">BaseAsyncConnection</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseConnection"><code class="docutils literal notranslate"><span class="pre">BaseConnection</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.connect"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.connect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.disconnect"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.get_connection"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.get_connection()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.get_consumer_count"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.get_consumer_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.get_message_count"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.get_message_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.is_connected"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.is_connected()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.publish"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.publish()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.purge"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.purge()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.subscribe"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.subscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncConnection.unsubscribe"><code class="docutils literal notranslate"><span class="pre">BaseSyncConnection.unsubscribe()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.get_consumer_count"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.get_consumer_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.get_message_count"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.get_message_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.publish"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.publish()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.publish_result"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.publish_result()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.purge"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.purge()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.subscribe"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.subscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.subscribe_results"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.subscribe_results()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.unsubscribe"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.unsubscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.BaseSyncQueue.unsubscribe_results"><code class="docutils literal notranslate"><span class="pre">BaseSyncQueue.unsubscribe_results()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protobunny.backends.LoggingSyncQueue"><code class="docutils literal notranslate"><span class="pre">LoggingSyncQueue</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.LoggingSyncQueue.publish"><code class="docutils literal notranslate"><span class="pre">LoggingSyncQueue.publish()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.LoggingSyncQueue.publish_result"><code class="docutils literal notranslate"><span class="pre">LoggingSyncQueue.publish_result()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#rabbitmq-aio-backend">RabbitMQ aio backend</a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.connect"><code class="docutils literal notranslate"><span class="pre">Connection.connect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.connection"><code class="docutils literal notranslate"><span class="pre">Connection.connection</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.disconnect"><code class="docutils literal notranslate"><span class="pre">Connection.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.exchange"><code class="docutils literal notranslate"><span class="pre">Connection.exchange</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.get_consumer_count"><code class="docutils literal notranslate"><span class="pre">Connection.get_consumer_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.get_message_count"><code class="docutils literal notranslate"><span class="pre">Connection.get_message_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.is_connected_event"><code class="docutils literal notranslate"><span class="pre">Connection.is_connected_event</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.lock"><code class="docutils literal notranslate"><span class="pre">Connection.lock</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.publish"><code class="docutils literal notranslate"><span class="pre">Connection.publish()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.purge"><code class="docutils literal notranslate"><span class="pre">Connection.purge()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.setup_queue"><code class="docutils literal notranslate"><span class="pre">Connection.setup_queue()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.subscribe"><code class="docutils literal notranslate"><span class="pre">Connection.subscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.connection.Connection.unsubscribe"><code class="docutils literal notranslate"><span class="pre">Connection.unsubscribe()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.queues.AsyncQueue"><code class="docutils literal notranslate"><span class="pre">AsyncQueue</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.rabbitmq.queues.AsyncQueue.send_message"><code class="docutils literal notranslate"><span class="pre">AsyncQueue.send_message()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mosquitto-aio-backend">Mosquitto aio backend</a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.mosquitto.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.build_topic_key"><code class="docutils literal notranslate"><span class="pre">Connection.build_topic_key()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.is_connected_event"><code class="docutils literal notranslate"><span class="pre">Connection.is_connected_event</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.purge"><code class="docutils literal notranslate"><span class="pre">Connection.purge()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.subscribe"><code class="docutils literal notranslate"><span class="pre">Connection.subscribe()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.mosquitto.connection.Connection.unsubscribe"><code class="docutils literal notranslate"><span class="pre">Connection.unsubscribe()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#redis-aio-backend">Redis aio backend</a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.connect"><code class="docutils literal notranslate"><span class="pre">Connection.connect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.connection"><code class="docutils literal notranslate"><span class="pre">Connection.connection</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.disconnect"><code class="docutils literal notranslate"><span class="pre">Connection.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.get_consumer_count"><code class="docutils literal notranslate"><span class="pre">Connection.get_consumer_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.get_message_count"><code class="docutils literal notranslate"><span class="pre">Connection.get_message_count()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.is_connected_event"><code class="docutils literal notranslate"><span class="pre">Connection.is_connected_event</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.lock"><code class="docutils literal notranslate"><span class="pre">Connection.lock</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.publish"><code class="docutils literal notranslate"><span class="pre">Connection.publish()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.purge"><code class="docutils literal notranslate"><span class="pre">Connection.purge()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.reset_stream_groups"><code class="docutils literal notranslate"><span class="pre">Connection.reset_stream_groups()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.setup_queue"><code class="docutils literal notranslate"><span class="pre">Connection.setup_queue()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.redis.connection.Connection.subscribe"><code class="docutils literal notranslate"><span class="pre">Connection.subscribe()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#nats-aio-backend">NATS aio backend</a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection.connect"><code class="docutils literal notranslate"><span class="pre">Connection.connect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection.connection"><code class="docutils literal notranslate"><span class="pre">Connection.connection</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection.disconnect"><code class="docutils literal notranslate"><span class="pre">Connection.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection.is_connected_event"><code class="docutils literal notranslate"><span class="pre">Connection.is_connected_event</span></code></a></li>
<li><a class="reference internal" href="#protobunny.asyncio.backends.nats.connection.Connection.lock"><code class="docutils literal notranslate"><span class="pre">Connection.lock</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#python-aio-backend">Python aio backend</a></li>
<li><a class="reference internal" href="#rabbitmq-backend">RabbitMQ backend</a><ul>
<li><a class="reference internal" href="#protobunny.backends.rabbitmq.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.rabbitmq.connection.Connection.async_class"><code class="docutils literal notranslate"><span class="pre">Connection.async_class</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#protobunny.backends.rabbitmq.queues.SyncQueue"><code class="docutils literal notranslate"><span class="pre">SyncQueue</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.rabbitmq.queues.SyncQueue.send_message"><code class="docutils literal notranslate"><span class="pre">SyncQueue.send_message()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mosquitto-backend">Mosquitto backend</a><ul>
<li><a class="reference internal" href="#protobunny.backends.mosquitto.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.mosquitto.connection.Connection.get_connection"><code class="docutils literal notranslate"><span class="pre">Connection.get_connection()</span></code></a></li>
<li><a class="reference internal" href="#protobunny.backends.mosquitto.connection.Connection.purge"><code class="docutils literal notranslate"><span class="pre">Connection.purge()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#redis-backend">Redis backend</a><ul>
<li><a class="reference internal" href="#protobunny.backends.redis.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.redis.connection.Connection.async_class"><code class="docutils literal notranslate"><span class="pre">Connection.async_class</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#nats-backend">NATS backend</a><ul>
<li><a class="reference internal" href="#protobunny.backends.nats.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a><ul>
<li><a class="reference internal" href="#protobunny.backends.nats.connection.Connection.async_class"><code class="docutils literal notranslate"><span class="pre">Connection.async_class</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#python-backend">Python backend</a></li>
<li><a class="reference internal" href="#logger-service">Logger service</a></li>
<li><a class="reference internal" href="#protobunny-utility">protobunny utility</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=92734c54"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>